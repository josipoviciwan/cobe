(window["webpackJsonpmovie-api"]=window["webpackJsonpmovie-api"]||[]).push([[0],{20:function(e,t,n){e.exports=n(34)},34:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(16),r=n.n(c),i=(n(25),n(10)),l=n(6),s=n(9),u=n(5),f={borderRadius:"100%",width:"60px",height:"60px"};function m(){var e=Object(a.useState)(1),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),i=Object(u.a)(r,2),l=i[0],m=i[1],g=function(e){return fetch("https://api.themoviedb.org/3/movie/top_rated?api_key=f57efe1486f26a1000ecc7f73ebf0005&language=en-US&page="+e).then((function(e){return e.json()})).then((function(e){m((function(t){return[].concat(Object(s.a)(t),Object(s.a)(e.results))})),c((function(e){return e+1}))})).catch((function(e){console.log(e)}))};return Object(a.useEffect)((function(){l.length||g(n)})),l.length?o.a.createElement("div",{className:"text-center"},o.a.createElement("div",{className:"row"},l.map((function(e){return o.a.createElement(b,{key:e.id,movie:e})}))),o.a.createElement("button",{type:"button",className:"btn btn-dark ",style:f,onClick:function(){g(n+1)}},"Load")):o.a.createElement("div",null,"Loading...")}function g(e){var t=Object(a.useState)({}),n=Object(u.a)(t,2),c=n[0],r=n[1];Object(a.useEffect)((function(){0===Object.keys(c).length&&fetch("https://api.themoviedb.org/3/movie/"+e.match.params.id+"?api_key=f57efe1486f26a1000ecc7f73ebf0005&language=en-US").then((function(e){return e.json()})).then((function(e){r((function(){return e}))})).catch((function(e){console.log(e)}))}));var i=c.title,l=c.release_date,s=c.original_language,f=c.overview,m=c.backdrop_path,g=c.vote_average,d=c.popularity,p=c.production_companies,h=c.id;return 0===Object.keys(c).length?o.a.createElement("div",null,"Loading..."):o.a.createElement("div",{className:""},o.a.createElement("h1",null,i," (",l.slice(0,4),")"),console.log(c),o.a.createElement("img",{src:"https://image.tmdb.org/t/p/w500"+m,className:"card-img-top",alt:"..."}),o.a.createElement("div",null,f),o.a.createElement("p",null,"Rating: ",g," ",o.a.createElement("br",null),"Popularity: ",d," ",o.a.createElement("br",null),"Language: ",s," ",o.a.createElement("br",null),"Production companies:"," ",p.map((function(e,t){var n=e.name;return t===p.length-1?n:n+", "}))),o.a.createElement(_,{vote_average:g,id:h}))}var d={width:"80px",height:"80px",borderBottomLeftRadius:"50px",textAlign:"center",display:"flex",justifyContent:"center",alignContent:"center",flexDirection:"column",position:"absolute",right:"0",backgroundColor:"rgba(255, 255, 255, 0.5)",fontSize:"30px",fontWeight:"bold"},p={textDecoration:"none",color:"black"},h={textDecoration:"none",color:"#606060"};function b(e){var t=e.movie,n=Object(a.useState)(!1),c=Object(u.a)(n,2),r=c[0],l=c[1];function s(){l((function(e){return!e}))}return Object(a.useEffect)((function(){})),o.a.createElement("div",{className:"col col-12  col-md-6 col-lg-4 col-xl-3 "+(r?"p-2":"p-1")},o.a.createElement(i.b,{to:"/movie/"+t.id,style:r?h:p},o.a.createElement("div",{className:"card h-100 ",onMouseEnter:s,onMouseLeave:s},o.a.createElement("img",{src:"https://image.tmdb.org/t/p/w500"+t.poster_path,className:"card-img-top",alt:"..."}),o.a.createElement("div",{className:"",style:d},t.vote_average),o.a.createElement("div",{className:"card-body"},o.a.createElement("h5",{className:"card-title"},t.title," (",t.release_date.slice(0,4),")"),o.a.createElement("p",{className:"card-text"},"Language: ",t.original_language.toUpperCase())))))}var v=n(19),E=n.n(v);function _(e){e.vote_average;var t=e.id,n=Object(a.useState)(0),c=Object(u.a)(n,2),r=c[0],i=c[1],l=JSON.parse(localStorage.getItem("guestToken"));return console.log("TOKEN: ",l),Object(a.useEffect)((function(){0===r&&fetch("https://api.themoviedb.org/3/guest_session/"+l.guest_session_id+"/rated/movies?api_key=f57efe1486f26a1000ecc7f73ebf0005",{cache:"no-store"}).then((function(e){return e.json()})).then((function(e){var n=Object(s.a)(e.results.filter((function(e){return e.id===t})));n.length&&i(n[0].rating)})).catch((function(e){return console.log(e)}))})),o.a.createElement("div",null,o.a.createElement(E.a,{rating:r,starRatedColor:"yellow",changeRating:function(e){fetch("https://api.themoviedb.org/3/movie/"+t+"/rating?api_key=f57efe1486f26a1000ecc7f73ebf0005&guest_session_id="+l.guest_session_id,{method:"POST",mode:"cors",cache:"no-store",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrer:"no-referrer",body:JSON.stringify({value:e})}).then((function(t){console.log(t),i((function(){return e}))})).catch((function(e){console.log(e)}))},numberOfStars:10,name:"rating"}),o.a.createElement("button",{className:"btn btn-dark",onClick:function(){fetch("https://api.themoviedb.org/3/movie/"+t+"/rating?api_key=f57efe1486f26a1000ecc7f73ebf0005&guest_session_id="+l.guest_session_id,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){return e.text()})).then((function(e){console.log(e),i((function(){return 0}))})).catch((function(e){console.log(e)}))}},"Delete rating"))}var j=function(){var e=function(){fetch("https://api.themoviedb.org/3/authentication/guest_session/new?api_key=f57efe1486f26a1000ecc7f73ebf0005").then((function(e){return e.json()})).then((function(e){console.log("New guest token fetched"),localStorage.setItem("guestToken",JSON.stringify(e))}))};return Object(a.useEffect)((function(){var t=JSON.parse(localStorage.getItem("guestToken"));if(t){var n=t.expires_at;new Date(n)<new Date&&e()}else e()})),o.a.createElement(i.a,null,o.a.createElement("main",{className:"container"},o.a.createElement(l.c,null,o.a.createElement(l.a,{exact:!0,path:"/",component:m}),o.a.createElement(l.a,{exact:!0,path:"/movie/:id",component:g}),o.a.createElement(l.a,{path:"/*",component:m}))),o.a.createElement("footer",null," This is a Cobe app"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[20,1,2]]]);
//# sourceMappingURL=main.c687ed30.chunk.js.map