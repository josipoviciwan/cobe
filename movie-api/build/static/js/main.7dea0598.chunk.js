(window["webpackJsonpmovie-api"]=window["webpackJsonpmovie-api"]||[]).push([[0],{20:function(e,t,n){e.exports=n(34)},34:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(16),i=n.n(c),r=(n(25),n(10)),l=n(6),s=n(9),u=n(2),f={position:"fixed",right:"10px",bottom:"10px",zIndex:"1",border:"10px solid black",color:"black",fontWeight:"bold"};function m(e){var t=Object(a.useState)(1),n=Object(u.a)(t,2),c=n[0],i=n[1],r=Object(a.useState)([]),l=Object(u.a)(r,2),m=l[0],d=l[1],g=Object(a.useState)(!1),p=Object(u.a)(g,2),h=p[0],v=p[1];var E=function(e){return fetch("https://api.themoviedb.org/3/movie/top_rated?api_key=f57efe1486f26a1000ecc7f73ebf0005&language=en-US&page="+e).then((function(e){return e.json()})).then((function(e){d((function(t){return[].concat(Object(s.a)(t),Object(s.a)(e.results))})),i((function(e){return e+1}))})).catch((function(e){console.log(e)}))};return Object(a.useEffect)((function(){m.length||E(c)})),m.length?o.a.createElement("div",{className:"text-center"},o.a.createElement("button",{className:"btn btn-warning ",style:f,type:"button",onClick:function(){v((function(){return!0}))}},"RANDOM"),o.a.createElement(O,{show:h,hideModal:function(){v((function(){return!1}))},history:e.history}),o.a.createElement("div",{className:"row"},m.map((function(e){return o.a.createElement(b,{key:e.id,movie:e})}))),o.a.createElement("button",{type:"button",className:"btn btn-dark my-5 ",onClick:function(){E(c+1)}},"Load more . . .")):o.a.createElement("div",null,"Loading...")}function d(e){var t=Object(a.useState)({}),n=Object(u.a)(t,2),c=n[0],i=n[1];Object(a.useEffect)((function(){0===Object.keys(c).length&&fetch("https://api.themoviedb.org/3/movie/"+e.match.params.id+"?api_key=f57efe1486f26a1000ecc7f73ebf0005&language=en-US").then((function(e){return e.json()})).then((function(e){i((function(){return e}))})).catch((function(e){console.log(e)}))}));var r=c.title,l=c.release_date,s=c.original_language,f=c.overview,m=c.backdrop_path,d=c.vote_average,g=c.popularity,p=c.production_companies,h=c.id,b=c.poster_path;return 0===Object.keys(c).length?o.a.createElement("div",null,"Loading..."):o.a.createElement("div",{className:""},o.a.createElement("h1",null,r," (",l.slice(0,4),")"),o.a.createElement("object",{data:"https://image.tmdb.org/t/p/w500"+m,className:"w-100",type:"image/png"},o.a.createElement("img",{src:"https://image.tmdb.org/t/p/w500"+b,className:"w-100",alt:"..."})),o.a.createElement("p",{style:{fontWeight:"strong",fontSize:"20px"}},"Rating: ",d," ",o.a.createElement("br",null),"Popularity: ",g," ",o.a.createElement("br",null),"Language: ",s," ",o.a.createElement("br",null),"Production companies:"," ",p.map((function(e,t){var n=e.name;return t===p.length-1?n:n+", "}))),o.a.createElement("div",null,f),o.a.createElement(y,{vote_average:d,id:h}))}var g={width:"80px",height:"80px",borderBottomLeftRadius:"50px",textAlign:"center",display:"flex",justifyContent:"center",alignContent:"center",flexDirection:"column",position:"absolute",right:"0",backgroundColor:"rgba(255, 255, 255, 0.5)",fontSize:"30px",fontWeight:"bold"},p={textDecoration:"none",color:"black"},h={textDecoration:"none",color:"#606060"};function b(e){var t=e.movie,n=Object(a.useState)(!1),c=Object(u.a)(n,2),i=c[0],l=c[1];function s(){l((function(e){return!e}))}return Object(a.useEffect)((function(){})),o.a.createElement("div",{className:"col col-12  col-md-6 col-lg-4 col-xl-3 "+(i?"p-2":"p-1")},o.a.createElement(r.b,{to:"/movie/"+t.id,style:i?h:p},o.a.createElement("div",{className:"card h-100 ",onMouseEnter:s,onMouseLeave:s},o.a.createElement("img",{src:"https://image.tmdb.org/t/p/w500"+t.poster_path,className:"card-img-top rounded-0",alt:"..."}),o.a.createElement("div",{className:"",style:g},t.vote_average),o.a.createElement("div",{className:"card-body"},o.a.createElement("h5",{className:"card-title"},t.title," (",t.release_date.slice(0,4),")"),o.a.createElement("p",{className:"card-text"},"Language: ",t.original_language.toUpperCase())))))}var v=n(19),E=n.n(v);function y(e){e.vote_average;var t=e.id,n=Object(a.useState)(0),c=Object(u.a)(n,2),i=c[0],r=c[1],l=JSON.parse(localStorage.getItem("guestToken"));return console.log("TOKEN: ",l),Object(a.useEffect)((function(){0===i&&fetch("https://api.themoviedb.org/3/guest_session/"+l.guest_session_id+"/rated/movies?api_key=f57efe1486f26a1000ecc7f73ebf0005",{cache:"no-store"}).then((function(e){return e.json()})).then((function(e){var n=Object(s.a)(e.results.filter((function(e){return e.id===t})));n.length&&r(n[0].rating)})).catch((function(e){return console.log(e)}))})),o.a.createElement("div",{className:"py-5"},o.a.createElement(E.a,{rating:i,starRatedColor:"red",changeRating:function(e){fetch("https://api.themoviedb.org/3/movie/"+t+"/rating?api_key=f57efe1486f26a1000ecc7f73ebf0005&guest_session_id="+l.guest_session_id,{method:"POST",mode:"cors",cache:"no-store",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrer:"no-referrer",body:JSON.stringify({value:e})}).then((function(t){console.log(t),r((function(){return e}))})).catch((function(e){console.log(e)}))},numberOfStars:10,name:"rating",starDimension:"30px",starSpacing:"5px"}),o.a.createElement("bR",null),o.a.createElement("button",{className:"btn btn-danger my-5",onClick:function(){fetch("https://api.themoviedb.org/3/movie/"+t+"/rating?api_key=f57efe1486f26a1000ecc7f73ebf0005&guest_session_id="+l.guest_session_id,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){return e.text()})).then((function(e){console.log(e),r((function(){return 0}))})).catch((function(e){console.log(e)}))}},"Delete rating"))}var _={position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.6)"},j={position:"fixed",background:"white",width:"80%",height:"auto",top:"50%",left:"50%",transform:"translate(-50%,-50%)"};function k(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function O(e){var t=e.show,n=e.hideModal,c=e.history,i=Object(a.useState)([]),r=Object(u.a)(i,2),l=r[0],s=r[1],f=Object(a.useState)(null),m=Object(u.a)(f,2),d=m[0],g=m[1];Object(a.useEffect)((function(){l.length||fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=f57efe1486f26a1000ecc7f73ebf0005&language=en-US").then((function(e){return e.json()})).then((function(e){s(e.genres)}))}));var p=t?"modal d-block":"modal d-none";function h(e){var t=e.target;g((function(){return t.id}))}return o.a.createElement("div",{className:p,style:_},o.a.createElement("section",{className:"modal-main p-2",style:j},o.a.createElement("button",{className:"btn btn-danger d-block ml-auto",type:"button",onClick:n},"CLOSE"),o.a.createElement("h1",null,"Pick a genre"),o.a.createElement("div",null,o.a.createElement("ul",{className:"list-unstyled text-left d-inline-block"},l.map((function(e){return o.a.createElement("li",{key:e.id},o.a.createElement("input",{type:"radio",name:"genre",value:e.name,onClick:h,id:e.id})," ",e.name," ",o.a.createElement("br",null))})))),o.a.createElement("button",{type:"button",onClick:function(){fetch("https://api.themoviedb.org/3/discover/movie?api_key=f57efe1486f26a1000ecc7f73ebf0005&language=en-US&include_adult=false&include_video=false&page=1&with_genres="+d).then((function(e){return e.json()})).then((function(e){var t=e.total_pages,n=(e.results,k(1,t)),a=k(0,19);fetch("https://api.themoviedb.org/3/discover/movie?api_key=f57efe1486f26a1000ecc7f73ebf0005&language=en-US&include_adult=false&include_video=false&page="+n+"&with_genres="+d).then((function(e){return e.json()})).then((function(e){var t=e.results;c.push("/movie/"+t[a].id)}))}))},className:"btn btn-success "},"Submit")))}var w=function(){var e=function(){fetch("https://api.themoviedb.org/3/authentication/guest_session/new?api_key=f57efe1486f26a1000ecc7f73ebf0005").then((function(e){return e.json()})).then((function(e){console.log("New guest token fetched"),localStorage.setItem("guestToken",JSON.stringify(e))}))};return Object(a.useEffect)((function(){var t=JSON.parse(localStorage.getItem("guestToken"));if(t){var n=t.expires_at;new Date(n)<new Date&&e()}else e()})),o.a.createElement(r.a,null,o.a.createElement("main",{className:"container"},o.a.createElement(l.c,null,o.a.createElement(l.a,{exact:!0,path:"/",component:m}),o.a.createElement(l.a,{exact:!0,path:"/movie/:id",component:d}),o.a.createElement(l.a,{path:"/*",component:m}))),o.a.createElement("footer",null,o.a.createElement("div",{className:"container text-center"},"This is a Cobe job application app \xa9"," ")," "))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[20,1,2]]]);
//# sourceMappingURL=main.7dea0598.chunk.js.map